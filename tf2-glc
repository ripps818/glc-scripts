#! /bin/bash
# use 32-bit version of glc to capture Team Fortess 2 beta for Linux
# Steam client must be running.
# by Taylor "Ripps" LeMasurier-Wren <ripps818@gmail.com>
DIR="$(pwd)"

GLCARGS="-l $DIR/tf2-glc.log -v 3 -i -p -b back -s -o $DIR/tf2.glc --uncompressed=100 --unscaled 100 --compressed=200"
GAMEROOT="/home/ripps-arch/Steam/SteamApps/ripps818/Team Fortress 2"
STEAMPATH="/home/ripps-arch/Steam/ubuntu12_32"
GAMEEXE=hl2_linux

export LD_LIBRARY_PATH=bin:$STEAMPATH:/usr/lib32:$LD_LIBRARY_PATH
export SteamAppId=440

# Enable Nvidia Optimizations
export LD_PRELOAD="libpthread.so.0 libGL.so.1 __GL_THREADED_OPTIMIZATIONS=1"

cd $GAMEROOT

# Record audio
record-voice $DIR/tf2.voice.wav &

# Start game"
chmod +x "$GAMEEXE
echo "glc-capture $GLCARGS $GAMEEXE -game tf -steam -novid"
glc-capture $GLCARGS "$GAMEEXE" -game tf -steam -novid
killall parec

